<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="referrer" content="origin" />
    <title>SpringBoot-@PathVariable - 起床oO - 博客园</title>
    <meta property="og:description" content="URL变量 在上一个博客中，学习了如何在@Controller中创建@RequestMapping（或者响应的简写）来处理不同的URL请求。但是在Web应用中URL通常不是一成不变的，例如微博两个不同" />
    <link type="text/css" rel="stylesheet" href="/bundles/blog-common.css?v=-duj5vpGTntb85GJoM3iRI972XwWcI-j8zmqDzyfu2w1"/>
    <link id="MainCss" type="text/css" rel="stylesheet" href="/skins/BlueSky/bundle-BlueSky.css?v=_lYRTG5SjWWADGcuS8G-fWWj62fg5g8s6xd9-hRa-g01"/>
    <link type="text/css" rel="stylesheet" href="/blog/customcss/366100.css?v=8JcS%2fqIQzn3%2bYhsb72bn4FBDxqI%3d"/>
    <link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="/skins/BlueSky/bundle-BlueSky-mobile.css?v=tgTI4mJND1W3oSlADG85orpVMk0EVZnMYKnLFkf_k1I1"/>
    <link title="RSS" type="application/rss+xml" rel="alternate" href="https://www.cnblogs.com/fangpengchengbupter/rss"/>
    <link title="RSD" type="application/rsd+xml" rel="EditURI" href="https://www.cnblogs.com/fangpengchengbupter/rsd.xml"/>
    <link type="application/wlwmanifest+xml" rel="wlwmanifest" href="https://www.cnblogs.com/fangpengchengbupter/wlwmanifest.xml"/>
    <script src="//common.cnblogs.com/scripts/jquery-2.2.0.min.js"></script>
    <script>var currentBlogId=366100;var currentBlogApp='fangpengchengbupter',cb_enable_mathjax=false;var isLogined=false;</script>
    <script src="/bundles/blog-common.js?v=75GlRjvNr9aYgWttsJIxQDp4deiGqNQyDe6Io4CHSa81" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>


<!--done-->
<div id="home">
    <div id="header">
        <div id="blogTitle">
            <a id="lnkBlogLogo" href="https://www.cnblogs.com/fangpengchengbupter/"><img id="blogLogo" src="/Skins/custom/images/logo.gif" alt="返回主页" /></a>

            <!--done-->
            <h1><a id="Header1_HeaderTitle" class="headermaintitle" href="https://www.cnblogs.com/fangpengchengbupter/">起床oO</a></h1>
            <h2></h2>




        </div><!--end: blogTitle 博客的标题和副标题 -->
        <div id="navigator">

            <ul id="navList">
                <li><a id="blog_nav_sitehome" class="menu" href="https://www.cnblogs.com/">博客园</a></li>
                <li><a id="blog_nav_myhome" class="menu" href="https://www.cnblogs.com/fangpengchengbupter/">首页</a></li>
                <li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
                <li><a id="blog_nav_contact" class="menu" rel="nofollow" href="https://msg.cnblogs.com/send/%E8%B5%B7%E5%BA%8AoO">联系</a></li>
                <li><a id="blog_nav_rss" class="menu" href="https://www.cnblogs.com/fangpengchengbupter/rss">订阅</a>
                    <!--<a id="blog_nav_rss_image" class="aHeaderXML" href="https://www.cnblogs.com/fangpengchengbupter/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
                <li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
            </ul>
            <div class="blogStats">

                <div id="blog_stats">
                    <span id="stats_post_count">随笔 - 168&nbsp; </span>
                    <span id="stats_article_count">文章 - 0&nbsp; </span>
                    <span id="stats-comment_count">评论 - 8</span>
                </div>

            </div><!--end: blogStats -->
        </div><!--end: navigator 博客导航栏 -->
    </div><!--end: header 头部 -->

    <div id="main">
        <div id="mainContent">
            <div class="forFlow">

                <div id="post_detail">
                    <!--done-->
                    <div id="topics">
                        <div class = "post">
                            <h1 class = "postTitle">
                                <a id="cb_post_title_url" class="postTitle2" href="https://www.cnblogs.com/fangpengchengbupter/p/7823493.html">SpringBoot-@PathVariable</a>
                            </h1>
                            <div class="clear"></div>
                            <div class="postBody">
                                <div id="cnblogs_post_body" class="blogpost-body"><h4>URL变量</h4>
                                    <p>在上一个博客中，学习了如何在@Controller中创建@RequestMapping（或者响应的简写）来处理不同的URL请求。但是在Web应用中URL通常不是一成不变的，例如微博两个不同用户的个人主页对应两个不同的URL：http://weibo.com/user1,http://weibo.com/user2。我们不能对于每一个用户都编写一个被@RequestMapping注解的方法来处理其请求，也就是说，对于相同模式的URL（例如不同用户的主页，它们仅仅是URL中的某一部分不同，为他们各自的用户名，我们说它们具有相同的模式）。</p>
                                    <h4>定义URL变量规则</h4>
                                    <p>可以在@RequestMapping注解中用{}来表明它的变量部分，例如：</p>
                                    <div class="cnblogs_code">
                                        <pre>@RequestMapping("/users/{username}")</pre>
                                    </div>
                                    <p>这里{username}就是我们定义的变量规则，username是变量的名字，那么这个URL路由可以匹配下列任意URL并进行处理：</p>
                                    <ul>
                                        <li>/users/tianmaying</li>
                                        <li>/users/ricky</li>
                                        <li>users/tmy1234</li>
                                    </ul>
                                    <p>需要注意的是，在默认情况下，变量中不可以包含URL的分隔符/，例如路由不能匹配/users/tianmaying/ricky,即使你认为tianmaying/ricky是一个存在的用户名。</p>
                                    <h4>获取URL变量</h4>
                                    <p>在路由中定义变量规则后，通常我们需要在处理方法（也就是@RequestMapping注解的方法）中获取这个URL的具体值，并根据这个值（例如用户名）做相应的操作，SpringMVC提供的@PathVariable可以帮助我们：</p>
                                    <div class="cnblogs_code">
<pre>@RequestMapping("/users/{username}"<span style="color: #000000;">)
    @ResponseBody
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String userProfile(@PathVariable String username){
</span><span style="color: #008000;">//</span><span style="color: #008000;">        return String.format("user %s", username);</span>
        <span style="color: #0000ff;">return</span> "user" +<span style="color: #000000;"> username;
    }</span></pre>
                                    </div>
                                    <p>在上述例子中，当@Controller处理HTTP请求时，userProfile的参数username会自动设置为URL中对应变量username（同名赋值）的值，例如当HTTP请求为/users/fpc</p>
                                    <p>,URL变量username的值fpc会被赋给函数参数username，函数的返回值自然是userfpc。</p>
                                    <p>在默认的情况下，Spring会对@PathVariable注解的变量进行自动赋值，当然你也可以指定@PathVariable使用哪一个URL中的变量：</p>
                                    <div class="cnblogs_code">
<pre>@RequestMapping("/users/{username}"<span style="color: #000000;">)
    @ResponseBody
    </span><span style="color: #0000ff;">public</span> String userProfile(@PathVariable("username"<span style="color: #000000;">) String username){
</span><span style="color: #008000;">//</span><span style="color: #008000;">        return String.format("user %s", username);</span>
        <span style="color: #0000ff;">return</span> "user" +<span style="color: #000000;"> username;
    }</span></pre>
                                    </div>
                                    <p>运行结果：</p>
                                    <p><img src="https://images2017.cnblogs.com/blog/1177029/201711/1177029-20171112231227903-887648968.png" alt="" /></p>
                                    <p><img src="https://images2017.cnblogs.com/blog/1177029/201711/1177029-20171112231256481-1218887783.png" alt="" /></p>
                                    <h4>&nbsp;定义多个URL变量</h4>
                                    <p>可以定义URL路由，其中包含多个URL变量：</p>
                                    <div class="cnblogs_code">
<pre>@RequestMapping("/user/{username}/blog/{blogId}"<span style="color: #000000;">)
    @ResponseBody
    </span><span style="color: #0000ff;">public</span> String getUerBlog(@PathVariable String username , @PathVariable <span style="color: #0000ff;">int</span><span style="color: #000000;"> blogId) {
        </span><span style="color: #0000ff;">return</span> "user: " + username + "blog-&gt;" +<span style="color: #000000;"> blogId;
    }</span></pre>
                                    </div>
                                    <p>这种情况下，Spring能够根据名字自动赋值对应的函数参数值，当然也可以在@PathVariable中显示地表明具体的URL变量值。</p>
                                    <p>在默认情况下，@PathVariable注解的参数可以是一些基本的简单类型：int，long，Date，String等，Spring能根据URL变量的具体值以及函数参数的类型来进行转换，例如/user/fpc/blog/1，会将&ldquo;fpc&rdquo;的值赋给username，而1赋值给int变量blogId。</p>
                                    <p>运行结果：</p>
                                    <p><img src="https://images2017.cnblogs.com/blog/1177029/201711/1177029-20171113112617952-1798018126.png" alt="" /></p>
                                    <h4>匹配正则表达式</h4>
                                    <p>很多时候，需要对URL变量进行更加精确的定义，例如-用户名只可能包含小写字母，数字，下划线，我们希望：</p>
                                    <ul>
                                        <li>/user/fpc是一个合法的URL</li>
                                        <li>/user/#$$$则不是一个合法的URL</li>
                                    </ul>
                                    <p>除了简单地定义{username}变量，还可以定义正则表达式进行更精确的控制，定义语法是{变量名：正则表达式}[a-zA-Z0-9_]+是一个正则表达式，表示只能包含小写字母，大写字母，数字，下划线。如此设置URL变量规则后，不合法的URL则不会被处理，直接由SpringMVC框架返回404Not Found。</p>
                                    <div class="cnblogs_code">
                                        <pre>@RequestMapping("/user/{username:[a-zA-Z0-9_]+}/blog/{blogId}")</pre>
                                    </div>
                                    <h4>总结</h4>
                                    <ul>
                                        <li>在@RequestMapping注解中定义URL变量规则</li>
                                        <li>在@RequestMapping注解方法中获取URL变量-@PathVariable</li>
                                        <li>@PathVariable指定URL变量名</li>
                                        <li>定义多个URL变量</li>
                                        <li>用正则表达式精确定义URL变量</li>
                                    </ul></div><div id="MySignature"></div>
                                <div class="clear"></div>
                                <div id="blog_post_info_block">
                                    <div id="BlogPostCategory"></div>
                                    <div id="EntryTag"></div>
                                    <div id="blog_post_info">
                                    </div>
                                    <div class="clear"></div>
                                    <div id="post_next_prev"></div>
                                </div>


                            </div>
                            <div class = "postDesc">posted @ <span id="post-date">2017-11-12 23:13</span> <a href='https://www.cnblogs.com/fangpengchengbupter/'>起床oO</a> 阅读(<span id="post_view_count">...</span>) 评论(<span id="post_comment_count">...</span>)  <a href ="https://i.cnblogs.com/EditPosts.aspx?postid=7823493" rel="nofollow">编辑</a> <a href="#" onclick="AddToWz(7823493);return false;">收藏</a></div>
                        </div>
                        <script type="text/javascript">var allowComments=true,cb_blogId=366100,cb_entryId=7823493,cb_blogApp=currentBlogApp,cb_blogUserGuid='44e301aa-e54a-47e3-2e57-08d4a8d9e085',cb_entryCreatedDate='2017/11/12 23:13:00';loadViewCount(cb_entryId);var cb_postType=1;var isMarkdown=false;</script>

                    </div><!--end: topics 文章、评论容器-->
                </div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
                <div id='comment_form' class='commentform'>
                    <a name='commentform'></a>
                    <div id='divCommentShow'></div>
                    <div id='comment_nav'><span id='span_refresh_tips'></span><a href='javascript:void(0);' onclick='return RefreshCommentList();' id='lnk_RefreshComments' runat='server' clientidmode='Static'>刷新评论</a><a href='#' onclick='return RefreshPage();'>刷新页面</a><a href='#top'>返回顶部</a></div>
                    <div id='comment_form_container'></div>
                    <div class='ad_text_commentbox' id='ad_text_under_commentbox'></div>
                    <div id='ad_t2'></div>
                    <div id='opt_under_post'></div>
                    <script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
                    <script>
                        var googletag = googletag || {};
                        googletag.cmd = googletag.cmd || [];
                    </script>
                    <script>
                        googletag.cmd.push(function() {
                            googletag.defineSlot('/1090369/C1', [300, 250], 'div-gpt-ad-1546353474406-0').addService(googletag.pubads());
                            googletag.defineSlot('/1090369/C2', [468, 60], 'div-gpt-ad-1539008685004-0').addService(googletag.pubads());
                            googletag.pubads().enableSingleRequest();
                            googletag.enableServices();
                        });
                    </script>
                    <div id='cnblogs_c1' class='c_ad_block'>
                        <div id='div-gpt-ad-1546353474406-0' style='height:250px; width:300px;'></div>
                    </div>
                    <div id='under_post_news'></div>
                    <div id='cnblogs_c2' class='c_ad_block'>
                        <div id='div-gpt-ad-1539008685004-0' style='height:60px; width:468px;'></div>
                    </div>
                    <div id='under_post_kb'></div>
                    <div id='HistoryToday' class='c_ad_block'></div>
                    <script type='text/javascript'>
                        if(enablePostBottom()) {
                            codeHighlight();
                            fixPostBody();
                            setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
                            deliverT2();
                            deliverC1();
                            deliverC2();
                            loadNewsAndKb();
                            loadBlogSignature();
                            LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
                            GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
                            loadOptUnderPost();
                            GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);
                        }
                    </script>
                </div>


            </div><!--end: forFlow -->
        </div><!--end: mainContent 主体内容容器-->

        <div id="sideBar">
            <div id="sideBarMain">

                <!--done-->
                <div class="newsItem">
                    <h3 class="catListTitle">公告</h3>
                    <div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
                </div>

                <div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>

                <div id="leftcontentcontainer">
                    <div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
                </div>

            </div><!--end: sideBarMain -->
        </div><!--end: sideBar 侧边栏容器 -->
        <div class="clear"></div>
    </div><!--end: main -->
    <div class="clear"></div>
    <div id="footer">

        <!--done-->
        Copyright &copy;2019 起床oO
    </div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->

</body>
</html>